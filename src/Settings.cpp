// DON'T EDIT MANUALLY !!!!
// auto-generated by scripts/gen_settings.py !!!!

#include "SettingsSupport.cpp"

FieldMetadata gForwardSearchSettingsFieldMetadata[] = {
    { TYPE_I32, offsetof(ForwardSearchSettings, highlightOffset), NULL },
    { TYPE_I32, offsetof(ForwardSearchSettings, highlightWidth), NULL },
    { TYPE_I32, offsetof(ForwardSearchSettings, highlightPermanent), NULL },
    { TYPE_U32, offsetof(ForwardSearchSettings, highlightColor), NULL },
};

StructMetadata gForwardSearchSettingsMetadata = { sizeof(ForwardSearchSettings), 4, &gForwardSearchSettingsFieldMetadata[0] };

FieldMetadata gPaddingSettingsFieldMetadata[] = {
    { TYPE_U16, offsetof(PaddingSettings, top), NULL },
    { TYPE_U16, offsetof(PaddingSettings, bottom), NULL },
    { TYPE_U16, offsetof(PaddingSettings, left), NULL },
    { TYPE_U16, offsetof(PaddingSettings, right), NULL },
    { TYPE_U16, offsetof(PaddingSettings, spaceX), NULL },
    { TYPE_U16, offsetof(PaddingSettings, spaceY), NULL },
};

StructMetadata gPaddingSettingsMetadata = { sizeof(PaddingSettings), 6, &gPaddingSettingsFieldMetadata[0] };

FieldMetadata gAdvancedSettingsFieldMetadata[] = {
    { TYPE_BOOL, offsetof(AdvancedSettings, traditionalEbookUI), NULL },
    { TYPE_BOOL, offsetof(AdvancedSettings, escToExit), NULL },
    { TYPE_STR, offsetof(AdvancedSettings, emptyString), NULL },
    { TYPE_U32, offsetof(AdvancedSettings, logoColor), NULL },
    { TYPE_STRUCT_PTR, offsetof(AdvancedSettings, pagePadding), &gPaddingSettingsMetadata },
    { TYPE_STRUCT_PTR, offsetof(AdvancedSettings, foo2Padding), &gPaddingSettingsMetadata },
    { TYPE_STR, offsetof(AdvancedSettings, notEmptyString), NULL },
    { TYPE_STRUCT_PTR, offsetof(AdvancedSettings, forwardSearch), &gForwardSearchSettingsMetadata },
};

StructMetadata gAdvancedSettingsMetadata = { sizeof(AdvancedSettings), 8, &gAdvancedSettingsFieldMetadata[0] };

static const uint8_t gAdvancedSettingsDefault[] = {
    0x53, 0x6d, 0x75, 0x53, // magic id 'SumS'
    0x00, 0x00, 0x03, 0x02, // version 2.3
    0x19, 0x00, 0x00, 0x00, // top-level struct offset 0x19

    // offset: 0xc StructVal_0 ForwardSearchSettings
    0x00, // int32_t highlightOffset = 0x0
    0x1e, // int32_t highlightWidth = 0xf
    0x00, // int32_t highlightPermanent = 0x0
    0xfd, 0x65, 0x81, 0xff, // uint32_t highlightColor = 0x6581ff

    // offset: 0x13 StructVal_1 PaddingSettings
    0x02, // uint16_t top = 0x2
    0x02, // uint16_t bottom = 0x2
    0x04, // uint16_t left = 0x4
    0x04, // uint16_t right = 0x4
    0x04, // uint16_t spaceX = 0x4
    0x04, // uint16_t spaceY = 0x4

    // offset: 0x19 StructVal_2 AdvancedSettings
    0x01, // bool traditionalEbookUI = 0x1
    0x00, // bool escToExit = 0x0
    0x00, // const char * emptyString = ""
    0xfd, 0xff, 0xf2, 0x00, // uint32_t logoColor = 0xfff200
    0x13, // PaddingSettings * pagePadding = StructVal_1
    0x00, // PaddingSettings * foo2Padding = NULL
    0x05, 0x48, 0x65, 0x6c, 0x6c, 0x6f, // const char * notEmptyString = "Hello"
    0x0c, // ForwardSearchSettings * forwardSearch = StructVal_0
};

AdvancedSettings *DeserializeAdvancedSettings(const uint8_t *data, int dataLen, bool *usedDefaultOut)
{
    void *res = NULL;
    res = Deserialize(data, dataLen, AdvancedSettingsVersion, &gAdvancedSettingsMetadata);
    if (res) {
        if (usedDefaultOut)
            *usedDefaultOut = false;
        return (AdvancedSettings*)res;
    }
    res = Deserialize(&gAdvancedSettingsDefault[0], sizeof(gAdvancedSettingsDefault), AdvancedSettingsVersion, &gAdvancedSettingsMetadata);
    CrashAlwaysIf(!res);
    if (usedDefaultOut)
        *usedDefaultOut = true;
    return (AdvancedSettings*)res;
}

uint8_t *SerializeAdvancedSettings(AdvancedSettings *val, int *dataLenOut)
{
    return Serialize((const uint8_t*)val, AdvancedSettingsVersion, &gAdvancedSettingsMetadata, dataLenOut);
}

void FreeAdvancedSettings(AdvancedSettings *val)
{
    FreeStruct((uint8_t*)val, &gAdvancedSettingsMetadata);
}


